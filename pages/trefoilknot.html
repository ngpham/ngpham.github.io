<!DOCTYPE html>
<html lang="en">
<head>
  <title>Trefoil Knot</title>
  <meta charset="utf-8" />
</head>

<body style="margin: 0; padding: 0; width: 100%; height: 100vh;
      background-color: black">

<script type="text/javascript" src="../asset/js/trefoilknot.js"></script>

<script type="text/javascript">
  window.addEventListener('load', function() {
    var body = document.getElementsByTagName('body')[0];
    var scr = document.createElement('div');
    var w = body.offsetWidth;
    var h = body.offsetHeight;
    var ww = Math.floor(w * 0.9);
    var hh = Math.floor(h * 0.9);
    var topleftx = (w - ww) / 2;
    var toplefty = (h - hh) / 2;

    scr.setAttribute("style",
      "margin: 0; padding: 0" +
      "background-color: black; display: block; " +
      "width: " + ww + "px; " +
      "height: " + hh +"px");
    scr.style.position = "absolute";
    scr.style.left = topleftx + 'px';
    scr.style.top = toplefty + 'px';
    body.append(scr);
    var cvs = document.createElement('canvas');
    cvs.width = ww;
    cvs.height = hh;
    cvs.setAttribute("style",
      "margin: 0; padding: 0" +
      "width: " + ww + "px; " +
      "height: " + hh +"px");
    scr.append(cvs);
    var tkData = {n:9, style:'192, 92, 32, 0.9, 0.5, 0.6'};
    garunpTrefoilKnot.init(cvs, tkData.n, tkData.style);
  });

  // when used as an iframe, notify parent after the canvas was setup
  if (window.self != window.top) {
    window.addEventListener('load', function() {
      window.parent.postMessage("ready", '*');
    }, false);

    window.addEventListener('message', function(event) {
      var cvs = document.getElementsByTagName('canvas')[0];
      garunpTrefoilKnot.init(cvs, event.data.n, event.data.style);
    });
  }
</script>
</body>
